{% extends 'base.html' %}
{% block title %}{{lot.wine_name}}{% endblock %}

{% block body %}
<div style="display: flex; flex-direction: column;">

    <div style="display: flex; flex-direction: row; width: 100%; justify-content:stretch; margin: 20px;">
        <div style="margin:10px;">
            <img style="width:200px; border-radius: 10px;" src='/{{ lot.image() }}' alt="wine image ">
        </div>
        <div style="display: flex; flex-direction: column; justify-content: space-between; margin:10px;">
            <div>
                <h2>{{ lot.wine_name}} </h2>
                <h4>{{ lot.vintage.year }} </h4>
            </div>
            <div style="padding-bottom: 20px;">
                <form style="margin:10px;" action='/drink/{{ lot.lot_id }}'>
                    <button type="submit">Drink a bottle</button>
                </form>
                <div style="margin:10px; display: flex; flex-direction: row;">
                    <form action='/create_aging_schedule/{{ lot.lot_id }}'>
                        <button type="submit">Add bottles</button>
                        Quantity: <input type="integer" name="bottle_qty">
                    </form>
                </div>
            </div>
        </div>
        <div style="margin-left:40px;">
            <div class="card" style="width: 18rem; height: 15rem;">
                <div class="card-header">
                    {{ lot.vineyard.name }} Vineyard
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">Bottles available to drink now:  {{ count_drinkable_bottles }}</li>
                    <li class="list-group-item">All Bottles in Cellar: {{ count_all_bottles }}</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="notes-grid">
        <h3>Tasting notes:</h3>
        <div class="card-columns">
        {% for note in all_tasting_notes %}
        <div class="card" >
            <div class="card-body">
                <h5 class="card-title">{{ note.date.month }}, {{ note.date.year }}</h5>
                <p class="card-text">{{ note.note }}</p>
            </div>
        </div>
        {% endfor %}
        </div>
    </div>

</div>
{% endblock %}