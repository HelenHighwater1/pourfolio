{% extends 'base.html' %}
{% block title %}{{lot.wine_name}}{% endblock %}

{% block body %}
<div style="display: flex; flex-direction: column;">

    <div style="display: flex; flex-direction: row; width: 100%; justify-content:stretch; margin: 20px;">
        <div style="margin:10px;">
            <img style="width:200px" src='/{{ lot.image() }}' alt="wine image ">
        </div>
        <div style="margin:10px; border:solid; border-color: blue;">
            <h4>{{ lot.wine_name}}, {{ lot.vintage.year }} </h4>
            <form action='/drink/{{ lot.lot_id }}'>
                <button type="submit">Drink a bottle</button>
            </form>
            <div style="margin:10px; display: flex; flex-direction: row; border:solid; border-color:red">
                <form action='/create_aging_schedule/{{ lot.lot_id }}'>
                    <button type="submit">Add bottles</button>
                    Quantity: <input type="integer" name="bottle_qty">
                </form>
            </div>
        </div>
        <div  style="margin:10px;">
            <h4> {{ lot.vineyard.name }} Vineyard</h4>
            <p> Bottles available to drink now:{{ count_drinkable_bottles }}</p>
            
            <p> All Bottles in Cellar:
                {{ count_all_bottles }}
            </p>

        </div>
    </div>

    <div>
        <p>tasting notes:</p>
        
        <ul>
            {% for note in all_tasting_notes %}
            <li>
                {{ note.date.month }}, {{ note.date.year }}<br>
                {{ note.note }}
            </li>
            {% endfor %}
        </ul>
    </div>

</div>
{% endblock %}